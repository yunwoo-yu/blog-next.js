---
title: "í•­í•´í”ŒëŸ¬ìŠ¤ 2ì£¼ì°¨ - Virtual DOM, Diff"
createdAt: 2025-07-22
description: ë°”ë‹ë¼ ìë°”ìŠ¤í¬ë¦½íŠ¸ SPA ë§Œë“¤ê¸° ë‘ë²ˆì§¸ Virtual DOM
thumbnail: /images/activities/hh_plus_2/thumbnail.png
tags: [JavaScript, SPA, í•­í•´í”ŒëŸ¬ìŠ¤]
---

> í•­í•´í”ŒëŸ¬ìŠ¤ 2ì£¼ì°¨ ë°”ë‹ë¼ JavaScriptë¡œ Virtual DOM êµ¬í˜„í•˜ê¸°

## 2ì£¼ì°¨ ë°œì œ

í­í’ê°™ë˜ 1ì£¼ì°¨ ê³¼ì œë¥¼ BPëŠ” ê°„ì‹ íˆ í†µê³¼í–ˆë”ë‹ˆ ë°”ë¡œ 2ì£¼ì°¨ê°€ ì‹œì‘ë˜ì—ˆë‹¤. ì´ë²ˆ ê³¼ì œëŠ” JSXë¥¼ íŒŒì‹±í•´ Virtual DOMì„ ë§Œë“¤ê³  ì´ë¥¼ ì •ê·œí™”í•˜ì—¬ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ì–´ ë¹„êµ(diff)í•´ ë³€ê²½ì´ ìˆëŠ” ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ê³¼ì œì˜€ë‹¤. (ì´ë²¤íŠ¸ ê´€ë¦¬ê¹Œì§€)

ë‹¤í–‰íˆ ì´ë²ˆì—ëŠ” 1ì£¼ì°¨ë³´ë‹¤ ì–‘ì´ ì ì–´ í…ŒìŠ¤íŠ¸ë¥¼ ë”°ë¼ ë‹¨ê³„ë³„ë¡œ ë°Ÿì•„ê°€ë©° ê³ ë¯¼í•  ìˆ˜ ìˆì—ˆê¸°ì— ë‚˜ë¦„ ìˆ˜ì›”(?)í•˜ê²Œ í’€ ìˆ˜ ìˆì—ˆë‹¤. ë¬¼ë¡  React ì •ë„ì˜ ë³µì¡í•œ ì‹œìŠ¤í…œì€ ì•„ë‹ˆì§€ë§Œ ì´ë²ˆ ê³¼ì œë¥¼ í†µí•´ ê°€ìƒ DOMì„ ì •ê·œí™”í•˜ì—¬ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ê³  ì´ë¥¼ ë¹„êµí•˜ëŠ” ë°©ë²•ì„ ë°°ì› ë‹¤.

ì˜¤ëŠ˜ì€ ì „ì²´ì ì¸ í”Œë¡œìš°ë¥¼ ìƒì„¸í•˜ê²Œ ì ìœ¼ë©° ë³µê¸°í•˜ê³  íšŒê³ ë¥¼ ì§„í–‰í•´ë³´ì.

## ê³¼ì œ

### ì „ì²´ì ì¸ í”Œë¡œìš°

1. ìƒíƒœê°€ ë³€ê²½ëœë‹¤. (setState)
2. JSXë¥¼ íŒŒì‹±í•˜ì—¬ Virtual DOMì„ ë§Œë“ ë‹¤. (createVNode)
3. ì •ê·œí™”í•˜ì—¬ íŠ¸ë¦¬ë¥¼ ë§Œë“ ë‹¤. (normalizeVNode)
4. ì •ê·œí™”ëœ íŠ¸ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ DOM íŠ¸ë¦¬ë¥¼ ìƒì„±í•œë‹¤. (createElement)
5. íŠ¸ë¦¬ë¥¼ ë¹„êµí•˜ì—¬ ë³€ê²½ì´ ìˆëŠ” ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤.(Diff) ê¸°ì¡´ íŠ¸ë¦¬ê°€ ì—†ë‹¤ë©´ ìƒˆë¡œ ë§Œë“ ë‹¤. (updateElement, renderElement)
6. ê¸°ì¡´ ì´ë²¤íŠ¸ë¥¼ ì§€ìš°ê³  ìƒˆë¡œìš´ ì´ë²¤íŠ¸ë¥¼ ì¶”ê°€í•œë‹¤. (eventManager)

## createVNode

### jsxì— ëŒ€í•´ ì•Œì•„ë³´ì

JSXëŠ” JavaScriptì— XML/HTMLì„ ì¶”ê°€í•˜ì—¬ í™•ì¥ëœ ë¬¸ë²•ì´ë‹¤. ë¸Œë¼ìš°ì €ëŠ” ì´ë¥¼ ì´í•´í•  ìˆ˜ ì—†ê¸°ì— ì»´íŒŒì¼ ê³¼ì •ì„ ê±°ì³ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€í™˜ëœë‹¤. ì½”ë“œì˜ ë³€í™˜ì€ Babel ê°™ì€ ì»´íŒŒì¼ëŸ¬ë¥¼ í†µí•´ ì´ë£¨ì–´ì§„ë‹¤. ì´ë•Œ ì»´íŒŒì¼ëŸ¬ëŠ” ìš°ë¦¬ê°€ ì‘ì„±í•œ JSXë¥¼ íŒŒì‹±í•˜ì—¬ ë¸Œë¼ìš°ì €ê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” ì½”ë“œë¡œ ë³€í™˜í•œë‹¤.

```jsx
const App = () => {
  return (
    <div className="app">
      <h1>Hello, World!</h1>
    </div>
  )
}
// Reactì—ì„œ ì´ ì½”ë“œëŠ” íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬ë¥¼ í†µí•´ ì•„ë˜ì™€ ê°™ì´ ë³€ê²½ëœë‹¤.
const App = () => {
  return React.createElement("div", { className: "app" }, React.createElement("h1", null, "Hello, World!"));
}

// í•¨ìˆ˜ ì‹¤í–‰ ì‹œ ì•„ë˜ì™€ ê°™ì´ ê°ì²´ë¥¼ ìƒì„±í•œë‹¤.

const App = {
  type: "div",
  props: {
    className: "app"
  },
  children: [
    { type: "h1", props: { children: "Hello, World!" } }
  ]
  //... ìƒëµ ì‚¬ì‹¤ì€ ë” ë§ì€ ì†ì„±ì´ ì¡´ì¬í•œë‹¤.
}
```

ì‚¬ì‹¤ ì´ëŸ° ë³€í™˜ì€ íŠ¸ëœìŠ¤íŒŒì¼ëŸ¬ê°€ ë™ì‘í•˜ëŠ” ê³¼ì •ì— ê°€ê¹ì§€ë§Œ Babel í™ˆí˜ì´ì§€ë¥¼ ë³´ë©´ ìì‹ ì„ ì»´íŒŒì¼ëŸ¬ë¼ê³  ì‘ì„±ë˜ì–´ ìˆì–´ ì»´íŒŒì¼ ê³¼ì •ì´ë¼ê³  ë¶€ë¥´ê² ë‹¤.

### ì–´ë–»ê²Œ ë³€í™˜ì´ ì´ë£¨ì–´ì§ˆê¹Œ? (Vite ê¸°ì¤€)

[Vite ê³µì‹ ë¬¸ì„œ](https://vite.dev/guide/features.html#jsx)ì—ì„œ ì»´íŒŒì¼ ê³¼ì •ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ViteëŠ” ê¸°ë³¸ì ìœ¼ë¡œ .jsx, .tsx íŒŒì¼ì„ ì§€ì›í•˜ë©° ì´ë¥¼ ì»´íŒŒì¼í•˜ëŠ” ê²ƒì€ esbuildë¥¼ í†µí•´ ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ë‹¤. ìì„¸í•œ ë‚´ìš©ì€ [esbuild ê³µì‹ ë¬¸ì„œ](https://esbuild.github.io/content-types/#jsx)ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
ë¬¸ì„œë¥¼ í™•ì¸í•´ë³´ë©´ ê¸°ë³¸ì ìœ¼ë¡œëŠ” `React.createElement`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í™˜í•œë‹¤ê³  ë‚˜ì™€ìˆìœ¼ë©° Reactê°€ ì•„ë‹Œ ë‹¤ë¥¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•  ê²½ìš° esbuild ì˜µì…˜ì—ì„œ `jsx, jsxFactory`ë¥¼ ì„¤ì •í•˜ì—¬ ì»¤ìŠ¤í…€í•  ìˆ˜ ìˆë‹¤.

```js
import { defineConfig } from "vite";

export default defineConfig({
  esbuild: {
    jsx: "transform",
    jsxFactory: "createVNode",
  },
  optimizeDeps: {
    esbuildOptions: {
      jsx: "transform",
      jsxFactory: "createVNode",
    },
  },
})
```

ë¨¼ì € vite.config.jsì—ì„œ ì»´íŒŒì¼ ì˜µì…˜ì„ ì„¤ì •í•œë‹¤.

- jsx: "transform"ìœ¼ë¡œ ì„¤ì •í•˜ì—¬ JSXë¥¼ íŒŒì‹±í•˜ì—¬ jsxFactory í•¨ìˆ˜ë¥¼ ì´ìš©í•˜ë„ë¡ ì„¤ì • ([ì´ì™¸ì˜ ì˜µì…˜ë“¤](https://esbuild.github.io/api/#transformation))
- jsxFactory: ë³€í™˜ì— ì‚¬ìš©í•  ì»¤ìŠ¤í…€ í•¨ìˆ˜ ì´ë¦„

optimizeDepsëŠ” ê°œë°œ ì„œë²„ì—ì„œ ì‚¬ìš©í•  node_modulesì˜ ì˜ì¡´ì„±ì„ ìµœì í™”í•˜ëŠ” ì˜µì…˜ìœ¼ë¡œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬, ì˜ì¡´ì„±ì— JSXë„ ë³€í™˜í•˜ë„ë¡ ì„¤ì •í•´ì¤€ë‹¤.
ì—¬ê¸°ê¹Œì§€ ì„¤ì •í•œ í›„ ë‚´ê°€ ìƒì„±í•œ createVNodeê°€ ì‚¬ìš©ë˜ë„ë¡ í•˜ë ¤ë©´ ì•„ë˜ì™€ ê°™ì´ ì‘ì„±í•˜ë©´ ëœë‹¤.

```js
/** @jsx createVNode */ //-> ëª…ì‹œì ìœ¼ë¡œ jsxì— createVNode í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •
import { createVNode } from "../lib"; //-> ì‚¬ìš©í•  í•¨ìˆ˜ê°€ import ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.

// ì´ë ‡ê²Œ ì‘ì„±í•œ ì½”ë“œëŠ”
const App = () => {
  return (
    <div className="app">
      <h1>Hello, World!</h1>
    </div>
  )
}

// ì´ë ‡ê²Œ ë³€í™˜ëœë‹¤.
const App = () => {
  return createVNode('div', { className: 'app' }, createVNode('h1', null, 'Hello, World!')) ;
}
```

> ğŸ’¡ createVNode í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ importê°€ í•„ìš”í•œ ì´ìœ  (jsx classic)
> React 17 ì´ì „ ë²„ì „ì—ì„œëŠ” JSX ì‚¬ìš© ì‹œ React.createElementë¥¼ ìœ„í•´ import React from "react"ê°€ í•„ìˆ˜ì˜€ë‹¤.
> React 17ë¶€í„°ëŠ” react/jsx-runtime íŒ¨í‚¤ì§€ì™€ Babelì˜ runtime: automatic ì„¤ì •ì„ í†µí•´ Reactë¥¼ ìë™ìœ¼ë¡œ importí•œë‹¤. [React 17 ë²„ì „ ì—…ë°ì´íŠ¸ ë¬¸ì„œ](https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html)
> Viteì—ì„œëŠ” esbuildì˜ jsxInject ì˜µì…˜ìœ¼ë¡œ ìë™ importë¥¼ ì„¤ì •í•  ìˆ˜ ìˆì§€ë§Œ ì´ í”„ë¡œì íŠ¸ì—ì„œëŠ” runtime: classic ì„¤ì •ì„ ì‚¬ìš©í•˜ë¯€ë¡œ importë¥¼ ìˆ˜ë™ìœ¼ë¡œ ì¶”ê°€í•´ì•¼ í•œë‹¤.

```js
export function createVNode(type, props, ...children) {
  const vNode = {
    type: type,
    props,
    children: children.flat(Infinity).filter((node) => node === 0 || node), // ëª¨ë“  childrenì„ í‰íƒ„í™”í•˜ì—¬ ì¼ê´€ì„± ìˆëŠ” vNode í˜•íƒœë¡œ ë§Œë“ ë‹¤.
  };

  return vNode;
}
```

- ìˆ«ì 0ì€ ìœ íš¨í•œ ë Œë”ë§ ê°’ì´ì§€ë§Œ JavaScriptì—ì„œëŠ” falsy ê°’ì´ë¯€ë¡œ ë³„ë„ë¡œ ì²˜ë¦¬í•˜ê³  children ë°°ì—´ì€ 1ì°¨ì› ë°°ì—´ë¡œ í‰íƒ„í™”í•œë‹¤.

### ë§Œì•½ í‰íƒ„í™”ê°€ ì—†ë‹¤ë©´?

```js
// í‰íƒ„í™” ì „ children êµ¬ì¡°
children: [
  { type: 'h1', props: null, children: ['ì œëª©'] },
  [
    [
      { type: 'span', props: null, children: ['A'] },
      { type: 'hr', props: null, children: [] }
    ],
    [
      { type: 'span', props: null, children: ['B'] },
      { type: 'hr', props: null, children: [] }
    ]
  ]
]

// ê° childë¥¼ ìˆœíšŒí•  ë•Œ
children.forEach(child => {
  if (child.type) {
    // vNode ì²˜ë¦¬ ë¡œì§
    createElement(child.type, child.props, child.children)
  } else if (Array.isArray(child)) {
    // ë°°ì—´ì´ë©´? ì¬ê·€ì ìœ¼ë¡œ ë˜ ì²˜ë¦¬í•´ì•¼ í•¨
    child.forEach(nestedChild => {
      if (Array.isArray(nestedChild)) {
        // ë˜ ë°°ì—´ì´ë©´? ë” ê¹Šì€ ì¬ê·€ í•„ìš”...
      }
    })
  }
})
```

ë„ˆë¬´ ë§ì€ ì¬ê·€í•¨ìˆ˜ë¥¼ ëŒë ¤ì•¼ í•˜ê¸°ì— í‰íƒ„í™”ë¥¼ í•´ì¤€ë‹¤.

## normalizeVNode

createVNode í•¨ìˆ˜ëŠ” ë°ì´í„°ì˜ í˜•ì‹ì„ ì¼ê´€ì„± ìˆê²Œ ë§Œë“¤ì–´ì£¼ì§€ë§Œ ê·¸ ë‚´ë¶€ì— ë“¤ì–´ê°€ëŠ” ë°ì´í„° í˜•ì‹ì— ëŒ€í•œ ì²˜ë¦¬ê°€ í•„ìš”í•˜ê¸°ì— normalizeVNode í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì²˜ë¦¬í•œë‹¤.

### jsxì˜ ë‹¤ì–‘í•­ ê°’ë“¤ì„ ì²˜ë¦¬í•œë‹¤.

JSXì—ëŠ” JavaScriptë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆê¸°ì— ë‹¤ì–‘í•œ ê°’ë“¤ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. ì¡°ê±´ì— ë”°ë¥¸ ê°’, ë°°ì—´, í•¨ìˆ˜ ë“± ë‹¤ì–‘í•œ ê°’ë“¤ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆê¸°ì— ì´ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ normalizeVNode í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì²˜ë¦¬í•œë‹¤. ì•„ë˜ì—ì„œ ì˜ˆì‹œì™€ í•¨ê»˜ ì½”ë“œë¥¼ í™•ì¸í•´ë³´ì.

```jsx showLineNumbers
// 1. ì¡°ê±´ë¶€ ë Œë”ë§ìœ¼ë¡œ ì¸í•œ falsy ê°’ë“¤
{showContent && <div>ë‚´ìš©</div>}  // falseê°€ childrenì— í¬í•¨ë¨
{count > 0 ? <span>{count}</span> : null}  // nullì´ í¬í•¨ë¨

// 2. ì›ì‹œ íƒ€ì… ê°’ë“¤
<div>
  {userName}  // string
  {age}       // number
  {isActive}  // boolean
</div>

// 3. í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
function Welcome({name}) {
  return <h1>Hello {name}</h1>;
}
<Welcome name="React" />  // typeì´ í•¨ìˆ˜

// 4. ì¤‘ì²©ëœ êµ¬ì¡°
<div>
  {items.map(item => item.visible && <span>{item.name}</span>)}
</div>
```

ì´ëŸ° ë‹¤ì–‘í•œ ê°’ë“¤ì„ createVNode í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€í™˜í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë³€í™˜ëœë‹¤.

```js
// ì¡°ê±´ë¶€ ë Œë”ë§ ê²°ê³¼
{
  type: 'div',
  props: null,
  children: [
    false,  // showContentê°€ falseì¼ ë•Œ
    null,   // ì‚¼í•­ ì—°ì‚°ìì—ì„œ null
    "ì‚¬ìš©ìëª…",  // string
    25,     // number
    true,   // boolean
    { type: Welcome, props: {name: "React"}, children: [] }  // í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸
  ]
}
```

ì´ëŸ° ê°’ë“¤ì„ ë Œë”ë§í•˜ê¸° ìœ„í•´ì„œëŠ” ëª¨ë‘ ë¬¸ìì—´ë¡œ ë³€í™˜í•´ì¤˜ì•¼ í•œë‹¤.

```js showLineNumbers
// ì™„ì„±ëœ normalizeVNode í•¨ìˆ˜
export function normalizeVNode(vNode) {
  // 1. Falsy ê°’ë“¤ì€ ë¬¸ìì—´ë¡œ ë³€í™˜í•˜ì—¬ ë Œë”ë§ í•˜ì§€ ì•ŠëŠ”ë‹¤.
  if (vNode === null || vNode === undefined || vNode === Boolean(vNode)) {
    return "";
  }

  // 2. ì›ì‹œ íƒ€ì… ê°’ë“¤ì€ ë¬¸ìì—´ë¡œ ë³€í™˜í•œë‹¤.
  if (typeof vNode === "string" || typeof vNode === "number") {
    return String(vNode);
  }

  // 3. í•¨ìˆ˜ ì»´í¬ë„ŒíŠ¸ëŠ” ì‹¤í–‰í•˜ì—¬ ì¦‰ì‹œ normalizeVNode í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•œë‹¤.
  if (typeof vNode.type === "function") {
    return normalizeVNode(vNode.type({ ...vNode.props, children: vNode.children }));
  }

  // 4. ë°°ì—´ì¸ ê²½ìš° ì¬ê·€ì ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. ì´ë•Œ children ë°°ì—´ì˜ ë¹ˆ ë¬¸ìì—´ì„ ì œê±°í•œë‹¤. ìƒìœ„ ìš”ì†ŒëŠ” createVNodeì—ì„œ ì œê±°ë˜ì—ˆê¸°ì— ë¹ˆ ë¬¸ìì—´ì´ ë“¤ì–´ê°€ì§€ ì•ŠëŠ”ë‹¤.
  if (Array.isArray(vNode.children)) {
    return {
      ...vNode,
      children: vNode.children.map((child) => normalizeVNode(child)).filter((child) => child !== ""),
    };
  }

  // 5. ê·¸ ì™¸ ë‚˜ë¨¸ì§€ëŠ” ê·¸ëŒ€ë¡œ ë°˜í™˜í•œë‹¤.
  return vNode;
}
```

ì´ë ‡ê²Œ ì •ê·œí™” ê³¼ì •ì´ ëë‚˜ë©´ ëª¨ë“  ê°’ë“¤ì´ ë¬¸ìì—´ë¡œ ë³€í™˜ë˜ì–´ ë Œë”ë§ì´ ê°€ëŠ¥í•œ í˜•íƒœë¡œ ë³€í™˜ëœë‹¤.

## createElement

ì •ê·œí™”ëœ VNodeë¥¼ ê¸°ë°˜ìœ¼ë¡œ DOM íŠ¸ë¦¬ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ createElement í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ ì²˜ë¦¬í•œë‹¤.

### propsë¡œ ë“¤ì–´ì˜¨ ê°’ë“¤ì„ ì œê±°, ì—…ë°ì´íŠ¸ í•˜ëŠ” í•¨ìˆ˜

setAttribute í•¨ìˆ˜ëŠ” propsë¡œ ë“¤ì–´ì˜¨ ê°’ë“¤ì„ ì†ì„±ìœ¼ë¡œ ë„£ì–´ì£¼ëŠ” í•¨ìˆ˜ì´ë‹¤. HTMLì— ì ìš©ë  ìˆ˜ ìˆë„ë¡ className ê°™ì€ ì†ì„±ì„ ë³€í™˜í•´ ì ìš©í•´ì¤€ë‹¤. ë°˜ëŒ€ë¡œ removeAttribute í•¨ìˆ˜ëŠ” ì†ì„±ì„ ì œê±°í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. updateElement í•¨ìˆ˜ì—ì„œ ì‚¬ìš©ëœë‹¤.
ì´ë•Œ ì´ë²¤íŠ¸ ì²˜ë¦¬ëŠ” addEvent í•¨ìˆ˜ë¥¼ í†µí•´ ë“±ë¡í•˜ëŠ”ë° ì‹¤ì œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆì— ë“±ë¡í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆê³  ë³„ë„ì˜ ì´ë²¤íŠ¸ ë§¤ë‹ˆì €ë¥¼ í†µí•´ ì´ë²¤íŠ¸ ìœ„ì„ ë°©ì‹ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤.

```js
// propsë¡œ ë“¤ì–´ì˜¨ ê°’ë“¤ì„ ì‹¤ì œ DOMì— ì ìš©í•˜ê¸° ìœ„í•œ í•¨ìˆ˜
export function setAttribute(target, key, value) {
  if (key.startsWith("on") && typeof value === "function") {
    const eventType = key.slice(2).toLowerCase();

    addEvent(target, eventType, value);
  } else if (key === "className") {
    target.setAttribute("class", value);
  } else if (key === "style") {
    Object.assign(target.style, value);
  } else if (value === true) {
    target[key] = true;
  } else if (value === false) {
    target[key] = false;
  } else {
    target.setAttribute(key, value);
  }
}

// ì†ì„± ì œê±° í•¨ìˆ˜ (setAttribute í•¨ìˆ˜ì˜ ë°˜ëŒ€)
export function removeAttribute(target, key, value) {
  if (key.startsWith("on")) {
    const eventType = key.slice(2).toLowerCase();
    removeEvent(target, eventType, value);
  } else if (key === "className") {
    target.removeAttribute("class");
  } else if (key === "style") {
    target.style = {};
  } else if (value === true || value === false) {
    delete target[key];
  } else {
    target.removeAttribute(key);
  }
}
```

### ì •ê·œí™”ëœ vNodeë¥¼ ê¸°ë°˜ìœ¼ë¡œ DOM íŠ¸ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜

createElement í•¨ìˆ˜ëŠ” ì •ê·œí™”ëœ vNodeë¥¼ ê¸°ë°˜ìœ¼ë¡œ DOM íŠ¸ë¦¬ë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. ìì„¸í•œ ìˆœì„œëŠ” ì£¼ì„ì„ ì°¸ê³ í•˜ì.

```js
export function createElement(vNode) {
  // Falsy ê°’ë“¤ì€ í…ìŠ¤íŠ¸ ë…¸ë“œë¡œ ë³€í™˜í•œë‹¤.
  if (vNode === undefined || vNode === null || typeof vNode === "boolean") {
    return document.createTextNode("");
  }

  // ë¬¸ìì—´ ë˜ëŠ” ìˆ«ìëŠ” í…ìŠ¤íŠ¸ ë…¸ë“œë¡œ ë³€í™˜í•œë‹¤.
  if (typeof vNode === "string" || typeof vNode === "number") {
    return document.createTextNode(vNode);
  }

  // ë°°ì—´ì¸ ê²½ìš° í”„ë˜ê·¸ë¨¼íŠ¸ë¡œ ê°ì‹¸ ì¬ê·€ì ìœ¼ë¡œ ì²˜ë¦¬í•´ ìì‹ìš”ì†Œë¡œ ì¶”ê°€í•œë‹¤.
  if (Array.isArray(vNode)) {
    const fragment = document.createDocumentFragment();

    vNode.forEach((child) => {
      fragment.appendChild(createElement(child));
    });

    return fragment;
  }

  // ê·¸ ì™¸ ë‚˜ë¨¸ì§€ëŠ” ìš”ì†ŒëŠ” ë…¸ë“œë¡œ ë³€í™˜í•œë‹¤.
  const $element = document.createElement(vNode.type);

  // propsë¡œ ë“¤ì–´ì˜¨ ê°’ë“¤ì„ ì†ì„±ìœ¼ë¡œ ë„£ì–´ì¤€ë‹¤.
  if (vNode.props) {
    Object.entries(vNode.props).forEach(([key, value]) => {
      setAttribute($element, key, value);
    });
  }

  // ê°€ì¥ ìƒìœ„ ìš”ì†Œì¸ $elementì— childrenì„ ì¬ê·€ì ìœ¼ë¡œ ì¶”ê°€í•œë‹¤.
  $element.append(...vNode.children.map((child) => createElement(child)));

  return $element;
}

```

## renderElement, updateElement

### renderElement

renderElementëŠ” Reactë¡œ ë³´ìë©´ render í•¨ìˆ˜ì™€ ë¹„ìŠ·í•œ ì—­í• ì„ í•œë‹¤. ì»´í¬ë„ŒíŠ¸ë¥¼ ë Œë”ë§í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤.
render í”„ë¡œì„¸ìŠ¤ ì¤‘ ì»´í¬ë„ŒíŠ¸ë¥¼ ë„˜ê²¨ë°›ì•„ ì²« ë Œë”ë§ì´ë©´ ìƒˆë¡œìš´ íŠ¸ë¦¬ë¥¼ ë§Œë“¤ê³  ì´ë¯¸ ë Œë”ë§ëœ íŠ¸ë¦¬ê°€ ìˆë‹¤ë©´ ì´ë¥¼ ë¹„êµ(diff) í•˜ì—¬ ë³€ê²½ì´ ìˆëŠ” ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•œë‹¤.

```js
const currentNodeMap = new WeakMap();

export function renderElement(vNode, container) {
  const currentNodeTree = currentNodeMap.get(container);
  const progressWorkInNodeTree = normalizeVNode(vNode);

  if (!currentNodeTree) {
    container.appendChild(createElement(progressWorkInNodeTree));
  } else {
    updateElement(container, progressWorkInNodeTree, currentNodeTree);
  }

  currentNodeMap.set(container, progressWorkInNodeTree);
  setupEventListeners(container);
}
```

WeakMapì„ ì“´ ì´ìœ ëŠ” í‚¤ë¡œ ì‚¬ìš©í•œ ê°ì²´ê°€ ì‚¬ë¼ì§€ë©´ ìë™ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ë˜ê¸° ë•Œë¬¸ì´ë‹¤. ê·¼ë° í˜„ì¬ ì½”ë“œë¥¼ ê³°ê³°íˆ ë‹¤ì‹œ ì‚´í´ë³´ë‹ˆ í‚¤ë¡œ ì €ì¥ëœ container element (root element)ëŠ” ì œê±°ë˜ì§€ ì•Šê¸°ì— ì¼ë°˜ Mapì„ ì‚¬ìš©í•´ë„ ë  ê²ƒ ê°™ë‹¤.

> ğŸ’¡ ì™œ WeakMapì„ ì‚¬ìš©í•˜ëŠ”ê°€?
> ì¼ë°˜ Mapì„ ì‚¬ìš©í•  ê²½ìš° ê°•í•œ ì°¸ì¡°ë¡œ ì¸í•´ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ë°œìƒí•  ìˆ˜ ìˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ WeakMapì„ ì‚¬ìš©í•œë‹¤.
> WeakMapì€ í‚¤ë¡œ ì‚¬ìš©í•œ ê°ì²´ì— ëŒ€í•œ ì°¸ì¡°ê°€ ì—†ìœ¼ë©´ ìë™ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ëœë‹¤.
> ê°•í•œ ì°¸ì¡°ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ WeakMapì€ iteratorë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤. iteratorê°€ ì§€ì›ë˜ë©´ ë¹„ê²°ì •ì  ë™ì‘ì´ ë  ìˆ˜ ìˆê¸° ë•Œë¬¸

> ```js
> const wm = new WeakMap();
> let obj1 = {};
> let obj2 = {};
>
> wm.set(obj1, 'value1');
> wm.set(obj2, 'value2');
>
> obj1 = null; // ì–¸ì œ GCë ì§€ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥
>
> // ë§Œì•½ iteratorê°€ ìˆë‹¤ë©´?
> setTimeout(() => {
>   console.log([...wm.keys()].length); // 1ì¼ê¹Œ 2ì¼ê¹Œ? ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥!
> }, 1000);
> ```

### updateElement

updateElementëŠ” ì´ë¯¸ ë Œë”ë§ëœ íŠ¸ë¦¬ì™€ ìƒˆë¡œìš´ íŠ¸ë¦¬ë¥¼ ë¹„êµí•˜ì—¬ ë³€ê²½ì´ ìˆëŠ” ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” í•¨ìˆ˜ì´ë‹¤. (Reactì˜ diff ì•Œê³ ë¦¬ì¦˜ì„ ë‹´ë‹¹í•˜ëŠ” ë¶€ë¶„)

```js
// ì†ì„±ì„ ì—…ë°ì´íŠ¸ í•˜ëŠ” í•¨ìˆ˜
function updateAttributes(target, newProps, oldProps) {
  // newProps, oldPropsê°€ ì—†ì„ê²½ìš° ë¹ˆ ê°ì²´ë¡œ ì´ˆê¸°í™”
  const safeNewProps = newProps || {};
  const safeOldProps = oldProps || {};

  // ê¸°ì¡´ ì†ì„± ì¤‘ ìƒˆ ì†ì„±ì— ì—†ëŠ” ê²ƒë“¤ ì œê±°
  Object.keys(safeOldProps).forEach((key) => {
    if (!(key in safeNewProps)) {
      removeAttribute(target, key, safeOldProps[key]);
    }
  });

  // ìƒˆ ì†ì„± ì¶”ê°€/ì—…ë°ì´íŠ¸
  Object.keys(safeNewProps).forEach((key) => {
    if (key.startsWith("on")) {
      const eventType = key.slice(2).toLowerCase();
      if (safeOldProps[key]) {
        removeEvent(target, eventType, safeOldProps[key]);
      }

      if (safeNewProps[key]) {
        addEvent(target, eventType, safeNewProps[key]);
      }
    } else {
      setAttribute(target, key, safeNewProps[key]);
    }
  });
}

export function updateElement(parentElement, newNode, oldNode, index = 0) {
  const currentElement = parentElement.childNodes[index];

  // ê¸°ì¡´ ë…¸ë“œê°€ ìˆëŠ”ë° ìƒˆ ë…¸ë“œê°€ ì—†ìœ¼ë©´ ì œê±°
  if (oldNode && !newNode) {
    parentElement.removeChild(currentElement);
    return;
  }

  // ê¸°ì¡´ ë…¸ë“œê°€ ì—†ëŠ”ë° ìƒˆ ë…¸ë“œê°€ ìˆìœ¼ë©´ ìƒì„±í•´ì„œ ì¶”ê°€
  if (!oldNode && newNode) {
    parentElement.appendChild(createElement(newNode));
    return;
  }

  // ë‘˜ ë‹¤ í…ìŠ¤íŠ¸/ìˆ«ì ë…¸ë“œì¸ë° ê°’ì´ ë‹¤ë¥´ë©´ textContent ì—…ë°ì´íŠ¸
  if (
    (typeof newNode === "string" || typeof newNode === "number") &&
    (typeof oldNode === "string" || typeof oldNode === "number")
  ) {
    if (newNode !== oldNode) {
      currentElement.textContent = newNode;
    }
    return;
  }

  // Elementì˜ íƒ€ì…ì´ ë‹¤ë¥´ë©´ ë³€ê²½ëœ ê²ƒìœ¼ë¡œ ê°„ì£¼í•˜ê³  êµì²´
  if (typeof newNode !== typeof oldNode || newNode.type !== oldNode.type) {
    parentElement.replaceChild(createElement(newNode), currentElement);
    return;
  }

  // ì—¬ê¸°ê¹Œì§€ ì™”ë‹¤ë©´ ì†ì„±(props) ì—…ë°ì´íŠ¸ ì‹¤í–‰
  updateAttributes(currentElement, newNode.props, oldNode.props);

  // ìì‹ ë…¸ë“œë“¤ ì²˜ë¦¬í•˜ê¸° (ì¬ê·€ë¥¼ ì´ìš©í•œë‹¤.)
  const newChildren = newNode.children || [];
  const oldChildren = oldNode.children || [];
  const minLength = Math.min(newChildren.length, oldChildren.length);

  // ë¨¼ì € ê²¹ì¹˜ëŠ” ì¸ë±ìŠ¤ ìš”ì†Œê¹Œì§€ ì—…ë°ì´íŠ¸í•˜ê¸°
  for (let i = 0; i < minLength; i++) {
    updateElement(currentElement, newChildren[i], oldChildren[i], i);
  }

  // ì´í›„ newChildrenì´ lengthê°€ ë” ê¸¸ë©´ ì¶”ê°€
  if (newChildren.length > oldChildren.length) {
    for (let i = oldChildren.length; i < newChildren.length; i++) {
      updateElement(currentElement, newChildren[i], oldChildren[i], i);
    }
  }

  // ë§Œì•½ oldChildrenì´ newChildrenë³´ë‹¤ ë§ìœ¼ë©´ ë’¤ì—ì„œë¶€í„° ì œê±°
  else if (oldChildren.length > newChildren.length) {
    for (let i = oldChildren.length - 1; i >= newChildren.length; i--) {
      updateElement(currentElement, newChildren[i], oldChildren[i], i);
    }
  }
}
```

ì´ë ‡ê²Œ êµ¬í˜„í–ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì£¼ì„ì— ì ì–´ë†¨ìœ¼ë©° ì‚¬ì‹¤ Reactì˜ diff ì•Œê³ ë¦¬ì¦˜ê³¼ëŠ” ì¢€ ë‹¤ë¥´ë‹¤.
ì ì‹œ Reactì˜ diff ì•Œê³ ë¦¬ì¦˜ì„ ì‚´í´ë³´ìë©´ [Reeactì˜ diff ì•Œê³ ë¦¬ì¦˜](https://ko.legacy.reactjs.org/docs/reconciliation.html)ì€ ë‘ íŠ¸ë¦¬ë¥¼ ë¹„êµí•˜ì—¬ ë³€ê²½ì´ ìˆëŠ” ë¶€ë¶„ë§Œ ì—…ë°ì´íŠ¸í•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë‹¤. í¬ê²Œ ë³´ìë©´ 3ê°€ì§€ë¡œ ë‚˜ëˆŒ ìˆ˜ ìˆë‹¤.

1. ë‹¤ë¥¸ íƒ€ì…ì˜ ìš”ì†Œ: ì™„ì „íˆ ìƒˆë¡œ ë§Œë“¤ì–´ êµì²´

```jsx showLineNumbers
<div>Hello</div> â†’ <span>Hello</span>  // div ì œê±° í›„ span ìƒì„±
```

2. ê°™ì€ íƒ€ì…ì˜ ìš”ì†Œ: ì†ì„±ë§Œ ì—…ë°ì´íŠ¸
```jsx showLineNumbers
<div className="old">Hello</div> â†’ <div className="new">Hello</div>  // ì†ì„±ë§Œ ì—…ë°ì´íŠ¸
```

3. ìì‹ ìš”ì†Œ: keyë¥¼ í™œìš©í•´ íš¨ìœ¨ì ìœ¼ë¡œ ë¹„êµ
```jsx showLineNumbers
<ul>
  <li key="2015">Duke</li>
  <li key="2016">Villanova</li>
</ul>

// ReactëŠ” 2014 keyë¥¼ ê°€ì§„ elementê°€ ì¶”ê°€ë˜ì—ˆê³ ,
// 2015, 2016 keyë¥¼ ê°€ì§„ elementëŠ” ì´ë™ë§Œ ì‹œí‚¤ë©´ ëœë‹¤ëŠ” ê±¸ ReactëŠ” ì•Œê³  ìˆë‹¤.

<ul>
  <li key="2014">Connecticut</li>
  <li key="2015">Duke</li>
  <li key="2016">Villanova</li>
</ul>
```

4. keyë¥¼ indexë¡œ ì‚¬ìš©í•˜ë©´ ì•ˆ ë˜ëŠ” ì´ìœ 

```jsx showLineNumbers
// ì´ˆê¸° ìƒíƒœ
items = ['ì‚¬ê³¼', 'ë°”ë‚˜ë‚˜', 'ì˜¤ë Œì§€'];

// ë Œë”ë§ ê²°ê³¼ (indexë¥¼ keyë¡œ ì‚¬ìš©)
<li key={0}>ì‚¬ê³¼</li>     // key: 0
<li key={1}>ë°”ë‚˜ë‚˜</li>   // key: 1  
<li key={2}>ì˜¤ë Œì§€</li>   // key: 2

// ì²« ë²ˆì§¸ í•­ëª© ì‚­ì œ í›„
items = ['ë°”ë‚˜ë‚˜', 'ì˜¤ë Œì§€'];

// ë Œë”ë§ ê²°ê³¼
<li key={0}>ë°”ë‚˜ë‚˜</li>   // key: 0 (ì´ì „ì˜ 'ì‚¬ê³¼'ì˜€ë˜ key)
<li key={1}>ì˜¤ë Œì§€</li>   // key: 1 (ì´ì „ì˜ 'ë°”ë‚˜ë‚˜'ì˜€ë˜ key)
```

- ReactëŠ” keyê°€ ê°™ìœ¼ë©´ ê°™ì€ ìš”ì†Œë¼ê³  íŒë‹¨
- key={0}ì¸ ìš”ì†Œì˜ ë‚´ìš©ì´ 'ì‚¬ê³¼' â†’ 'ë°”ë‚˜ë‚˜'ë¡œ ë³€ê²½ë˜ì—ˆë‹¤ê³  ì¸ì‹
- ì‹¤ì œë¡œëŠ” ì‚­ì œë˜ì–´ì•¼ í•  ìš”ì†Œì¸ë° ë‚´ìš©ë§Œ ì—…ë°ì´íŠ¸ë¨

ì´ì™¸ì—ë„ ì…ë ¥ í•„ë“œ, ì• ë‹ˆë©”ì´ì…˜ ì˜¤ë™ì‘ ê°™ì€ ë¶€ë¶„ì´ ë¬¸ì œê°€ ë  ìˆ˜ ìˆì§€ë§Œ ë‹¤ìŒì— ë” ìì„¸íˆ ë‹¤ë£¨ê² ë‹¤.

## eventManager

ì´ì „ renderElement í•¨ìˆ˜ë¥¼ ë³´ë©´ ë§ˆì§€ë§‰ì— setupEventListenersë¥¼ í†µí•´ containerì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•˜ëŠ” ê³¼ì •ì´ ìˆë‹¤. ì´ ë¶€ë¶„ì„ ìì„¸íˆ ì‚´í´ë³´ì.

### ì „ì—­ ë³€ìˆ˜ ë° ì´ë²¤íŠ¸ ë“±ë¡, ì‚­ì œ í•¨ìˆ˜

ìš°ì„  ì´ë²¤íŠ¸ ìœ„ì„ì„ í•˜ëŠ” ê³¼ì •ì€ ì´ë ‡ë‹¤.

```bash showLineNumbers
// ì‚¬ìš©ìê°€ ë²„íŠ¼ í´ë¦­
// â†“
// ë£¨íŠ¸ ìš”ì†Œì˜ eventDelegationHandler ì‹¤í–‰
// â†“  
// í´ë¦­ëœ ìš”ì†Œë¶€í„° ì‹œì‘í•´ì„œ ë¶€ëª¨ë¡œ ì˜¬ë¼ê°€ë©° í•¸ë“¤ëŸ¬ ì°¾ê¸° (ì´ë²¤íŠ¸ ë²„ë¸”ë§)
// â†“
// í•¸ë“¤ëŸ¬ ë°œê²¬ì‹œ ì‹¤í–‰
```

```js
// ì „ì—­ ìƒíƒœ
const eventContext = new WeakMap();
const registeredEventTypes = new Set(); // ë“±ë¡ëœ ì´ë²¤íŠ¸ íƒ€ì…ë“¤ë§Œ ì¶”ì 
let currentRoot = null;

// ì´ë²¤íŠ¸ ë“±ë¡ í•¨ìˆ˜
export function addEvent(element, eventType, handler) {
  // ì´ë²¤íŠ¸ ë§¤ë‹ˆì €ì— ë“±ë¡ëœ ì´ë²¤íŠ¸ íƒ€ì…ì´ ì—†ìœ¼ë©´ ì´ˆê¸°í™”
  if (!eventContext.has(element)) {
    eventContext.set(element, {});
  }

  const handlers = eventContext.get(element);

  // ì´ë²¤íŠ¸ íƒ€ì…ì´ ì—†ìœ¼ë©´ ì´ˆê¸°í™”
  if (!handlers[eventType]) {
    handlers[eventType] = {};
  }

  // ì´ë²¤íŠ¸ íƒ€ì…ì— í•¸ë“¤ëŸ¬ ë“±ë¡
  handlers[eventType][handler.name] = handler;
  registeredEventTypes.add(eventType);
}

export function removeEvent(element, eventType, handler) {
  // ì´ë²¤íŠ¸ ë§¤ë‹ˆì €ì— ë“±ë¡ëœ elementê°€ ì—†ìœ¼ë©´ ì¢…ë£Œ
  if (!eventContext.has(element)) {
    return;
  }

  // ì´ë²¤íŠ¸ ë§¤ë‹ˆì €ì—ì„œ í•¸ë“¤ëŸ¬ ì°¾ê¸°
  const handlers = eventContext.get(element);

  // í•¸ë“¤ëŸ¬ê°€ ìˆìœ¼ë©´ ì‚­ì œ
  if (handlers[eventType]) {
    delete handlers[eventType][handler.name];

    // í•¸ë“¤ëŸ¬ê°€ ì—†ìœ¼ë©´ ì´ë²¤íŠ¸ íƒ€ì… ì‚­ì œ
    if (!Object.keys(handlers[eventType]).length) {
      delete handlers[eventType];
      registeredEventTypes.delete(eventType);
    }

    // ì´ë²¤íŠ¸ ë§¤ë‹ˆì €ì— ë“±ë¡ëœ í•¸ë“¤ëŸ¬ê°€ ì—†ìœ¼ë©´ ì‚­ì œ
    if (!Object.keys(handlers).length) {
      eventContext.delete(element);
    }
  }
}

```
ë¨¼ì € ì „ì—­ì— registeredEventTypes ë³€ìˆ˜ì— í™œì„±í™”ëœ ì´ë²¤íŠ¸ì˜ íƒ€ì…ë§Œì„ ë‹´ê³  eventContextì¸ WeakMapì— elementë¥¼ í‚¤ë¡œ ë„£ì–´ì¤¬ë‹¤. ì´ë ‡ê²Œ í•˜ë©´ ì°¸ì¡° ê´€ê³„ê°€ ì—®ì´ì§€ ì•Šê³  elementê°€ ì—†ì–´ì§ˆ ë•Œ ì‚­ì œí•˜ë©´ ìë™ìœ¼ë¡œ ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ì˜ ëŒ€ìƒì´ ëœë‹¤.

### setupEventListeners

```js
export function setupEventListeners(root) {
  // ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆë“¤ ì œê±°
  if (currentRoot) {
    registeredEventTypes.forEach((eventType) => {
      currentRoot.removeEventListener(eventType, eventDelegationHandler);
    });
  }

  currentRoot = root;

  registeredEventTypes.forEach((eventType) => {
    root.addEventListener(eventType, eventDelegationHandler);
  });
}

export const eventDelegationHandler = (e) => {
  let currentElement = e.target;

  // ì´ë²¤íŠ¸ ë²„ë¸”ë§ ì²˜ë¦¬ ì¶”ê°€ currentElementê°€ ìˆê³  e.currentTarget.parentElementê°€ currentElementì™€ ë‹¤ë¥´ë©´ ê³„ì† ë°˜ë³µ
  while (currentElement && currentElement !== e.currentTarget.parentElement) {
    const elementHandlers = eventContext.get(currentElement);

    if (elementHandlers) {
      const eventHandlers = elementHandlers[e.type];

      if (eventHandlers) {
        Object.values(eventHandlers).forEach((handler) => {
          try {
            handler(e);
          } catch (error) {
            console.error(`Error in ${e.type} handler:`, error);
          }
        });
        return;
      }
    }

    currentElement = currentElement.parentElement;
  }
};

```

ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆëŠ” setupí•  ë•Œ ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆë“¤ì„ ëª¨ë‘ ì œê±°í•˜ê³  ìƒˆë¡œ ë“±ë¡í•´ì£¼ëŠ” ë°©í–¥ìœ¼ë¡œ ì§„í–‰í–ˆë‹¤.
currentRootëŠ” ê¸°ì¡´ì— ì´ë²¤íŠ¸ ë“±ë¡ì„ í–ˆëŠ”ì§€ í™•ì¸í•˜ëŠ” ë³€ìˆ˜ì´ë‹¤.
eventDelegationHandler í•¨ìˆ˜ëŠ” event ê°ì²´ë¥¼ ë°›ì•„ targetElementê°€ eventContextì— ë“±ë¡ëœ í•¸ë“¤ëŸ¬ê°€ ìˆëŠ”ì§€ í™•ì¸í•˜ê³  ìˆìœ¼ë©´ ì‹¤í–‰í•œë‹¤. ì—†ë‹¤ë©´ ë¶€ëª¨ ì—˜ë¦¬ë¨¼íŠ¸ë¡œ ì¬í• ë‹¹í•˜ë©° ë°˜ë³µí•œë‹¤. (ì´ë²¤íŠ¸ ë²„ë¸”ë§)

## íšŒê³ 

í›„ ì–´ëŠìƒˆ 2ì£¼ì°¨ê°€ ëë‚˜ê³  3ì£¼ì°¨ ê³¼ì œë¥¼ ì§„í–‰í•˜ê³  ìˆë‹¤. ì´ë²ˆì—ëŠ” ê¸°ë¡ì´ ì¬ë” ëŠ¦ì–´ì¡ŒëŠ”ë° 3ì£¼ì°¨ ê³¼ì œë¶€í„°ëŠ” ê¸ˆìš”ì¼ì— ê¸°ë¡ ë° íšŒê³ ë¥¼ ëª¨ë‘ ì‘ì„±í•˜ëŠ”ê±¸ ëª©í‘œë¡œ í•´ì•¼ê² ë‹¤.

ì „ì²´ì ì¸ í”Œë¡œìš°ë¥¼ ì´í•´í•˜ë ¤ê³  ì½”ë“œë¥¼ ë³µê¸°í•˜ê³  ê¸°ë¡í•œ ì ì€ ê³„ì† ìœ ì§€ í•˜ê³  (Keep)

ì‚¬ì‹¤ ì´ë²ˆ 2ì£¼ì°¨ ê³¼ì œë¥¼ ê½¤ ë¹ ë¥´ê²Œ ì‘ì„±í–ˆëŠ”ë° BPë¥¼ ë…¸ë ¤ë³¼ ë²• í–ˆì§€ë§Œ í”¼ê³¤ì´ ìŒ“ì—¬ ë‚˜íƒœí•˜ê²Œ ì¡°ê¸ˆ ì‰¬ì–´ë²„ë ¸ë‹¤. (Problem)

3ì£¼ì°¨ ê³¼ì œëŠ” PRë„ ë” ê¹Šì´ ìˆê²Œ ì“°ê³  íšŒê³ ë„ í•´ë‹¹ ì£¼ì°¨ê°€ ì§€ë‚˜ê¸° ì „ì— ì‘ì„±ì„ ì™„ë£Œí•´ì•¼ì§€.. (Try)

